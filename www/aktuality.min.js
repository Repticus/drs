$(function(){$(".gallery a").prettyPhoto({animation_speed:"fast",slideshow:3000,show_title:false,allow_resize:true,deeplinking:false,overlay_gallery:true,social_tools:false});$.nette.init();$.nette.ext({success:function(){c()}});function c(){if(navigator.userAgent.match(/msie/i)){($("input[placeholder], textarea[placeholder]")).each(function(){var d=$(this);d.val(d.attr("placeholder"));d.focus(b);d.blur(a)})}}function b(){var d=$(this);if(d.val()===d.attr("placeholder")){d.val("")}}function a(){var d=$(this);if(!d.val()){d.val(d.attr("placeholder"))}}});(function(b,c,d){if(typeof c!=="function"){return console.error("nette.ajax.js: jQuery is missing, load it please")}var a=function(){var e={self:this,initialized:false,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var f=true;var h=Array.prototype.slice.call(arguments);var j=h.shift();var g=(typeof j==="string")?j:j.name;var k=(typeof j==="object")?j.off||{}:{};h.push(e.self);c.each(e.on[g],function(m,n){if(n===d||c.inArray(m,k)!==-1){return true}var l=n.apply(e.contexts[m],h);return f=(l===d||l)});return f},requestHandler:function(f){e.self.ajax({},this,f)},ext:function(h,g,f){while(!f){f="ext_"+Math.random();if(e.contexts[f]){f=d}}c.each(h,function(j,k){e.on[j][f]=k});e.contexts[f]=c.extend(g?g:{},{name:function(){return f},ext:function(j,l){var k=e.contexts[j];if(!k&&l){throw"Extension '"+this.name()+"' depends on disabled extension '"+j+"'."}return k}})}};this.ext=function(f,h,g){if(typeof f==="object"){e.ext(f,h)}else{if(h===d){return e.contexts[f]}else{if(!h){c.each(["init","load","prepare","before","start","success","complete","error"],function(j,k){e.on[k][f]=d});e.contexts[f]=d}else{if(typeof f==="string"&&e.contexts[f]!==d){throw"Cannot override already registered nette-ajax extension '"+f+"'."}else{e.ext(h,g,f)}}}}return this};this.init=function(g,f){if(e.initialized){throw"Cannot initialize nette-ajax twice."}if(typeof g==="function"){this.ext("init",null);this.ext("init",{load:g},f)}else{if(typeof g==="object"){this.ext("init",null);this.ext("init",g,f)}else{if(g!==d){throw"Argument of init() can be function or function-hash only."}}}e.initialized=true;e.fire("init");this.load();return this};this.load=function(){e.fire("load",e.requestHandler);return this};this.ajax=function(h,j,l){if(!h.nette&&j&&l){var f=c(j),n,m;var g=h.nette={e:l,ui:j,el:f,isForm:f.is("form"),isSubmit:f.is("input[type=submit]")||f.is("button[type=submit]"),isImage:f.is("input[type=image]"),form:null};if(g.isSubmit||g.isImage){g.form=g.el.closest("form")}else{if(g.isForm){g.form=g.el}}if(!h.url){h.url=g.form?g.form.attr("action"):j.href}if(!h.type){h.type=g.form?g.form.attr("method"):"get"}if(f.is("[data-ajax-off]")){var k=f.attr("data-ajax-off");if(k.indexOf("[")===0){h.off=f.data("ajaxOff")}else{if(k.indexOf(",")!==-1){h.off=k.split(",")}else{if(k.indexOf(" ")!==-1){h.off=k.split(" ")}else{h.off=k}}}if(typeof h.off==="string"){h.off=[h.off]}h.off=c.grep(c.each(h.off,function(o){return c.trim(o)}),function(o){return o.length})}}e.fire({name:"prepare",off:h.off||{}},h);if(h.prepare){h.prepare(h)}m=h.beforeSend;h.beforeSend=function(q,p){var o=e.fire({name:"before",off:p.off||{}},q,p);if((o||o===d)&&m){o=m(q,p)}return o};return this.handleXHR(c.ajax(h),h)};this.handleXHR=function(g,f){f=f||{};if(g&&(typeof g.statusText==="undefined"||g.statusText!=="canceled")){g.done(function(j,h,k){e.fire({name:"success",off:f.off||{}},j,h,k,f)}).fail(function(k,h,j){e.fire({name:"error",off:f.off||{}},k,h,j,f)}).always(function(j,h){e.fire({name:"complete",off:f.off||{}},j,h,f)});e.fire({name:"start",off:f.off||{}},g,f);if(f.start){f.start(g,f)}}return g}};c.nette=new (c.extend(a,c.nette?c.nette:{}));c.fn.netteAjax=function(g,f){return c.nette.ajax(f||{},this[0],g)};c.fn.netteAjaxOff=function(){return this.off(".nette")};c.nette.ext("validation",{before:function(m,j){if(!j.nette){return true}else{var h=j.nette}var k=h.e;var l=c.extend({keys:true,url:true,form:true},j.validate||(function(){if(!h.el.is("[data-ajax-validate]")){return}var e=h.el.data("ajaxValidate");if(e===false){return{keys:false,url:false,form:false}}else{if(typeof e==="object"){return e}}})()||{});var f=false;if(h.el.attr("data-ajax-pass")!==d){f=h.el.data("ajaxPass");f=typeof f==="bool"?f:true}if(l.keys){var g=k.button||k.ctrlKey||k.shiftKey||k.altKey||k.metaKey;if(h.form){if(g&&h.isSubmit){this.explicitNoAjax=true;return false}else{if(h.isForm&&this.explicitNoAjax){this.explicitNoAjax=false;return false}}}else{if(g){return false}}}if(l.form&&h.form&&!((h.isSubmit||h.isImage)&&h.el.attr("formnovalidate")!==d)){if(h.form.get(0).onsubmit&&h.form.get(0).onsubmit(k)===false){k.stopImmediatePropagation();k.preventDefault();return false}}if(l.url){if(/:|^#/.test(h.form?j.url:h.el.attr("href"))){return false}}if(!f){k.stopPropagation();k.preventDefault()}return true}},{explicitNoAjax:false});c.nette.ext("forms",{init:function(){var e;if(!b.Nette||!(e=this.ext("snippets"))){return}e.after(function(f){f.find("form").each(function(){b.Nette.initForm(this)})})},prepare:function(j){var h=j.nette;if(!h||!h.form){return}var m=h.e;var k=j.data||{};var l={};if(h.isSubmit){l[h.el.attr("name")]=h.el.val()||""}else{if(h.isImage){var n=h.el.offset();var g=h.el.attr("name");var f=[Math.max(0,m.pageX-n.left),Math.max(0,m.pageY-n.top)];if(g.indexOf("[",0)!==-1){l[g]=f}else{l[g+".x"]=f[0];l[g+".y"]=f[1]}}}if(typeof k!=="string"){k=c.param(k)}l=c.param(l);j.data=h.form.serialize()+(l?"&"+l:"")+"&"+k}});c.nette.ext("snippets",{success:function(j){var g=[];var h=[];if(j.snippets){for(var f in j.snippets){var e=this.getElement(f);if(e.get(0)){h.push(e.get(0))}c.each(this.beforeQueue,function(l,m){if(typeof m==="function"){m(e)}});this.updateSnippet(e,j.snippets[f]);c.each(this.afterQueue,function(l,m){if(typeof m==="function"){m(e)}})}var k=c(h).promise();c.each(this.completeQueue,function(l,m){if(typeof m==="function"){k.done(m)}})}}},{beforeQueue:[],afterQueue:[],completeQueue:[],before:function(e){this.beforeQueue.push(e)},after:function(e){this.afterQueue.push(e)},complete:function(e){this.completeQueue.push(e)},updateSnippet:function(g,f,e){if(typeof g==="string"){g=this.getElement(g)}if(g.is("title")){document.title=f}else{this.applySnippet(g,f,e)}},getElement:function(e){return c("#"+this.escapeSelector(e))},applySnippet:function(g,f,e){if(!e&&g.is("[data-ajax-append]")){g.append(f)}else{g.html(f)}},escapeSelector:function(e){return e.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}});c.nette.ext("redirect",{success:function(e){if(e.redirect){b.location.href=e.redirect;return false}}});c.nette.ext("state",{success:function(e){if(e.state){this.state=e.state}}},{state:null});c.nette.ext("unique",{start:function(e){if(this.xhr){this.xhr.abort()}this.xhr=e},complete:function(){this.xhr=null}},{xhr:null});c.nette.ext("abort",{init:function(){c("body").keydown(c.proxy(function(f){if(this.xhr&&(f.keyCode.toString()==="27"&&!(f.ctrlKey||f.shiftKey||f.altKey||f.metaKey))){this.xhr.abort()}},this))},start:function(e){this.xhr=e},complete:function(){this.xhr=null}},{xhr:null});c.nette.ext("load",{success:function(){c.nette.load()}});c.nette.ext("init",{load:function(e){c(this.linkSelector).off("click.nette",e).on("click.nette",e);c(this.formSelector).off("submit.nette",e).on("submit.nette",e).off("click.nette",":image",e).on("click.nette",":image",e).off("click.nette",":submit",e).on("click.nette",":submit",e);c(this.buttonSelector).closest("form").off("click.nette",this.buttonSelector,e).on("click.nette",this.buttonSelector,e)}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], button.ajax[type="submit"], input.ajax[type="image"]'})})(window,window.jQuery);var Nette=Nette||{};Nette.addEvent=function(c,a,d){var b=c["on"+a];c["on"+a]=function(){if(typeof b==="function"&&b.apply(c,arguments)===false){return false}return d.apply(c,arguments)}};Nette.getValue=function(f){var e,a;if(!f){return null}else{if(!f.nodeName){for(e=0,a=f.length;e<a;e++){if(f[e].checked){return f[e].value}}return null}else{if(f.nodeName.toLowerCase()==="select"){var d=f.selectedIndex,c=f.options,b=[];if(d<0){return null}else{if(f.type==="select-one"){return c[d].value}}for(e=0,a=c.length;e<a;e++){if(c[e].selected){b.push(c[e].value)}}return b}else{if(f.type==="checkbox"){return f.checked}else{if(f.type==="radio"){return Nette.getValue(f.form.elements[f.name].nodeName?[f]:f.form.elements[f.name])}else{return f.value.replace("\r","").replace(/^\s+|\s+$/g,"")}}}}}};Nette.validateControl=function(c,h,j){h=h||Nette.parseJSON(c.getAttribute("data-nette-rules"));for(var a=0,e=h.length;a<e;a++){var f=h[a],d=f.op.match(/(~)?([^?]+)/);f.neg=d[1];f.op=d[2];f.condition=!!f.rules;var b=f.control?c.form.elements[f.control]:c;var g=Nette.validateRule(b,f.op,f.arg);if(g===null){continue}if(f.neg){g=!g}if(f.condition&&g){if(!Nette.validateControl(c,f.rules,j)){return false}}else{if(!f.condition&&!g){if(b.disabled){continue}if(!j){Nette.addError(b,f.msg.replace("%value",Nette.getValue(b)))}return false}}}return true};Nette.validateForm=function(b){var e=b.form||b,c=false;if(e["nette-submittedBy"]&&e["nette-submittedBy"].getAttribute("formnovalidate")!==null){var f=Nette.parseJSON(e["nette-submittedBy"].getAttribute("data-nette-validation-scope"));if(f.length){c=new RegExp("^("+f.join("-|")+"-)")}else{return true}}for(var a=0;a<e.elements.length;a++){var d=e.elements[a];if(!(d.nodeName.toLowerCase() in {input:1,select:1,textarea:1})||(d.type in {hidden:1,submit:1,image:1,reset:1})||(c&&!d.name.replace(/]\[|\[|]|$/g,"-").match(c))||d.disabled||d.readonly){continue}if(!Nette.validateControl(d)){return false}}return true};Nette.addError=function(b,a){if(b.focus){b.focus()}if(a){alert(a)}};Nette.validateRule=function(b,d,a){var c=Nette.getValue(b);if(b.getAttribute){if(c===b.getAttribute("data-nette-empty-value")){c=""}}if(d.charAt(0)===":"){d=d.substr(1)}d=d.replace("::","_");d=d.replace(/\\/g,"");return Nette.validators[d]?Nette.validators[d](b,a,c):null};Nette.validators={filled:function(b,a,c){return c!==""&&c!==false&&c!==null},blank:function(b,a,c){return !Nette.validators.filled(b,a,c)},valid:function(b,a,c){return Nette.validateControl(b,null,true)},equal:function(d,b,e){if(b===undefined){return null}b=Nette.isArray(b)?b:[b];for(var c=0,a=b.length;c<a;c++){if(e==(b[c].control?Nette.getValue(d.form.elements[b[c].control]):b[c])){return true}}return false},notEqual:function(b,a,c){return a===undefined?null:!Nette.validators.equal(b,a,c)},minLength:function(b,a,c){return c.length>=a},maxLength:function(b,a,c){return c.length<=a},length:function(b,a,c){a=Nette.isArray(a)?a:[a,a];return(a[0]===null||c.length>=a[0])&&(a[1]===null||c.length<=a[1])},email:function(b,a,c){return(/^("([ !\x23-\x5B\x5D-\x7E]*|\\[ -~])+"|[-a-z0-9!#$%&'*+\/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+\/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]$/i).test(c)},url:function(b,a,c){return(/^(https?:\/\/|(?=.*\.))([0-9a-z\u00C0-\u02FF\u0370-\u1EFF](([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)*[a-z\u00C0-\u02FF\u0370-\u1EFF][-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF]|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i).test(c)},regexp:function(b,a,f){var d=typeof a==="string"?a.match(/^\/(.*)\/([imu]*)$/):false;if(d){try{return(new RegExp(d[1],d[2].replace("u",""))).test(f)}catch(c){}}},pattern:function(b,a,d){try{return typeof a==="string"?(new RegExp("^("+a+")$")).test(d):null}catch(c){}},integer:function(b,a,c){return(/^-?[0-9]+$/).test(c)},"float":function(b,a,c){return(/^-?[0-9]*[.,]?[0-9]+$/).test(c)},range:function(b,a,c){return Nette.isArray(a)?((a[0]===null||parseFloat(c)>=a[0])&&(a[1]===null||parseFloat(c)<=a[1])):null},submitted:function(b,a,c){return b.form["nette-submittedBy"]===b}};Nette.toggleForm=function(c,a){var b;Nette.toggles={};for(b=0;b<c.elements.length;b++){if(c.elements[b].nodeName.toLowerCase() in {input:1,select:1,textarea:1,button:1}){Nette.toggleControl(c.elements[b],null,null,a)}}for(b in Nette.toggles){Nette.toggle(b,Nette.toggles[b])}};Nette.toggleControl=function(c,n,p,h){n=n||Nette.parseJSON(c.getAttribute("data-nette-rules"));var l=false,g=Object.prototype.hasOwnProperty,o=function(){Nette.toggleForm(c.form)};for(var a=0,f=n.length;a<f;a++){var j=n[a],e=j.op.match(/(~)?([^?]+)/);j.neg=e[1];j.op=e[2];j.condition=!!j.rules;if(!j.condition){continue}var b=j.control?c.form.elements[j.control]:c;var m=p;if(m!==false){m=Nette.validateRule(b,j.op,j.arg);if(m===null){continue}if(j.neg){m=!m}}if(Nette.toggleControl(c,j.rules,m,h)||j.toggle){l=true;if(h){if(!b.nodeName){for(var d=0;d<b.length;d++){Nette.addEvent(b[d],"click",o)}}else{if(b.nodeName.toLowerCase()==="select"){Nette.addEvent(b,"change",o)}else{Nette.addEvent(b,"click",o)}}}for(var k in j.toggle||[]){if(g.call(j.toggle,k)){Nette.toggles[k]=Nette.toggles[k]||(m&&j.toggle[k])}}}}return l};Nette.parseJSON=function(s){s=s||"[]";if(s.substr(0,3)==="{op"){return eval("["+s+"]")}return window.JSON&&window.JSON.parse?JSON.parse(s):eval(s)};Nette.toggle=function(c,b){var a=document.getElementById(c);if(a){a.style.display=b?"":"none"}};Nette.initForm=function(a){a.noValidate="novalidate";Nette.addEvent(a,"submit",function(){return Nette.validateForm(a)});Nette.addEvent(a,"click",function(g){g=g||event;var f=g.target||g.srcElement;a["nette-submittedBy"]=(f.type in {submit:1,image:1})?f:null});Nette.toggleForm(a,true);if(/MSIE/.exec(navigator.userAgent)){var d={},b=function(){return false},c=function(){document.getElementById(this.htmlFor).focus();return false};for(i=0,elms=a.getElementsByTagName("label");i<elms.length;i++){d[elms[i].htmlFor]=elms[i]}for(i=0,elms=a.getElementsByTagName("select");i<elms.length;i++){Nette.addEvent(elms[i],"mousewheel",b);if(d[elms[i].htmlId]){Nette.addEvent(d[elms[i].htmlId],"click",c)}}}};Nette.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};Nette.addEvent(window,"load",function(){for(var a=0;a<document.forms.length;a++){Nette.initForm(document.forms[a])}});(function(d){function b(){var g=location.href;hashtag=g.indexOf("#prettyPhoto")!==-1?decodeURI(g.substring(g.indexOf("#prettyPhoto")+1,g.length)):false;return hashtag}function f(){if(typeof theRel=="undefined"){return}location.hash=theRel+"/"+rel_index+"/"}function c(){if(location.href.indexOf("#prettyPhoto")!==-1){location.hash="prettyPhoto"}}function a(k,h){k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var l="[\\?&]"+k+"=([^&#]*)";var j=new RegExp(l);var g=j.exec(h);return g==null?"":g[1]}d.prettyPhoto={version:"3.1.5"};d.fn.prettyPhoto=function(D){function M(){d(".pp_loaderIcon").hide();projectedTop=scroll_pos.scrollTop+(P/2-U.containerHeight/2);if(projectedTop<0){projectedTop=0}$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find(".pp_content").animate({height:U.contentHeight,width:U.contentWidth},settings.animation_speed);$pp_pic_holder.animate({top:projectedTop,left:z/2-U.containerWidth/2<0?0:z/2-U.containerWidth/2,width:U.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(U.height).width(U.width);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&j(pp_images[set_position])=="image"){$pp_pic_holder.find(".pp_hoverContainer").show()}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}if(settings.allow_expand){if(U.resized){d("a.pp_expand,a.pp_contract").show()}else{d("a.pp_expand").hide()}}if(settings.autoplay_slideshow&&!I&&!O){d.prettyPhoto.startSlideshow()}settings.changepicturecallback();O=true});F();D.ajaxcallback()}function q(g){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){d(".pp_loaderIcon").show();g()})}function R(g){g>1?d(".pp_nav").show():d(".pp_nav").hide()}function t(h,g){resized=false;B(h,g);imageWidth=h,imageHeight=g;if((G>z||L>P)&&doresize&&settings.allow_resize&&!A){resized=true,fitting=false;while(!fitting){if(G>z){imageWidth=z-200;imageHeight=g/h*imageWidth}else{if(L>P){imageHeight=P-200;imageWidth=h/g*imageHeight}else{fitting=true}}L=imageHeight,G=imageWidth}if(G>z||L>P){t(G,L)}B(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(L),containerWidth:Math.floor(G)+settings.horizontal_padding*2,contentHeight:Math.floor(J),contentWidth:Math.floor(Q),resized:resized}}function B(g,h){g=parseFloat(g);h=parseFloat(h);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(g);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().addClass(settings.theme).width(g).appendTo(d("body")).css({position:"absolute",top:-10000});detailsHeight+=$pp_details.height();detailsHeight=detailsHeight<=34?36:detailsHeight;$pp_details.remove();$pp_title=$pp_pic_holder.find(".ppt");$pp_title.width(g);titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom"));$pp_title=$pp_title.clone().appendTo(d("body")).css({position:"absolute",top:-10000});titleHeight+=$pp_title.height();$pp_title.remove();J=h+detailsHeight;Q=g;L=J+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();G=g}function j(g){if(g.match(/youtube\.com\/watch/i)||g.match(/youtu\.be/i)){return"youtube"}else{if(g.match(/vimeo\.com/i)){return"vimeo"}else{if(g.match(/\b.mov\b/i)){return"quicktime"}else{if(g.match(/\b.swf\b/i)){return"flash"}else{if(g.match(/\biframe=true\b/i)){return"iframe"}else{if(g.match(/\bajax=true\b/i)){return"ajax"}else{if(g.match(/\bcustom=true\b/i)){return"custom"}else{if(g.substr(0,1)=="#"){return"inline"}else{return"image"}}}}}}}}}function r(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=e();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=P/2+scroll_pos.scrollTop-contentHeight/2;if(projectedTop<0){projectedTop=0}if(contentHeight>P){return}$pp_pic_holder.css({top:projectedTop,left:z/2+scroll_pos.scrollLeft-contentwidth/2})}}function e(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}}else{if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}}else{if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}}}}function n(){P=d(window).height(),z=d(window).width();if(typeof $pp_overlay!="undefined"){$pp_overlay.height(d(document).height()).width(z)}}function F(){if(isSet&&settings.overlay_gallery&&j(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=settings.theme=="facebook"||settings.theme=="pp_default"?50:30;itemsPerPage=Math.floor((U.containerWidth-100-navWidth)/itemWidth);itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()}else{$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show()}galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected");goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage;d.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")}else{$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}}function K(g){if(settings.social_tools){facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))}settings.markup=settings.markup.replace("{pp_social}","");d("body").append(settings.markup);$pp_pic_holder=d(".pp_pic_holder"),$ppt=d(".ppt"),$pp_overlay=d("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var h=0;h<pp_images.length;h++){if(!pp_images[h].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname="default";img_src=""}else{classname="";img_src=pp_images[h]}toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_gallery=d(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li");$pp_gallery.find(".pp_arrow_next").click(function(){d.prettyPhoto.changeGalleryPage("next");d.prettyPhoto.stopSlideshow();return false});$pp_gallery.find(".pp_arrow_previous").click(function(){d.prettyPhoto.changeGalleryPage("previous");d.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=52+5;$pp_gallery_li.each(function(k){d(this).find("a").click(function(){d.prettyPhoto.changePage(k);d.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){d.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({opacity:0,height:d(document).height(),width:d(window).width()}).bind("click",function(){if(!settings.modal){d.prettyPhoto.close()}});d("a.pp_close").bind("click",function(){d.prettyPhoto.close();return false});if(settings.allow_expand){d("a.pp_expand").bind("click",function(k){if(d(this).hasClass("pp_expand")){d(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{d(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}q(function(){d.prettyPhoto.open()});return false})}$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){d.prettyPhoto.changePage("previous");d.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){d.prettyPhoto.changePage("next");d.prettyPhoto.stopSlideshow();return false});r()}D=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5000,autoplay_slideshow:false,opacity:0.8,show_title:true,allow_resize:true,allow_expand:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:false,wmode:"opaque",autoplay:true,modal:false,deeplinking:true,overlay_gallery:true,overlay_gallery_max:30,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> 						<div class="ppt"> </div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											<div class="pp_social">{pp_social}</div> 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&layout=button_count&show_faces=true&width=500&action=like&font&colorscheme=light&height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},D);var H=this,A=false,U,O,J,Q,L,G,P=d(window).height(),z=d(window).width(),I;doresize=true,scroll_pos=e();d(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){r();n()});if(D.keyboard_shortcuts){d(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(g){if(typeof $pp_pic_holder!="undefined"){if($pp_pic_holder.is(":visible")){switch(g.keyCode){case 37:d.prettyPhoto.changePage("previous");g.preventDefault();break;case 39:d.prettyPhoto.changePage("next");g.preventDefault();break;case 27:if(!settings.modal){d.prettyPhoto.close()}g.preventDefault();break}}}})}d.prettyPhoto.initialize=function(){settings=D;if(settings.theme=="pp_default"){settings.horizontal_padding=16}theRel=d(this).attr(settings.hook);galleryRegExp=/\[(?:.*)\]/;isSet=galleryRegExp.exec(theRel)?true:false;pp_images=isSet?jQuery.map(H,function(g,h){if(d(g).attr(settings.hook).indexOf(theRel)!=-1){return d(g).attr("href")}}):d.makeArray(d(this).attr("href"));pp_titles=isSet?jQuery.map(H,function(g,h){if(d(g).attr(settings.hook).indexOf(theRel)!=-1){return d(g).find("img").attr("alt")?d(g).find("img").attr("alt"):""}}):d.makeArray(d(this).find("img").attr("alt"));pp_descriptions=isSet?jQuery.map(H,function(g,h){if(d(g).attr(settings.hook).indexOf(theRel)!=-1){return d(g).attr("title")?d(g).attr("title"):""}}):d.makeArray(d(this).attr("title"));if(pp_images.length>settings.overlay_gallery_max){settings.overlay_gallery=false}set_position=jQuery.inArray(d(this).attr("href"),pp_images);rel_index=isSet?set_position:d("a["+settings.hook+"^='"+theRel+"']").index(d(this));K(this);if(settings.allow_resize){d(window).bind("scroll.prettyphoto",function(){r()})}d.prettyPhoto.open();return false};d.prettyPhoto.open=function(g){$("body").keypress(function(h){switch(h.keyCode){case 13:h.preventDefault();break}});if(typeof settings=="undefined"){settings=D;pp_images=d.makeArray(arguments[0]);pp_titles=arguments[1]?d.makeArray(arguments[1]):d.makeArray("");pp_descriptions=arguments[2]?d.makeArray(arguments[2]):d.makeArray("");isSet=pp_images.length>1?true:false;set_position=arguments[3]?arguments[3]:0;K(g.target)}if(settings.hideflash){d("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden")}R(d(pp_images).size());d(".pp_loaderIcon").show();if(settings.deeplinking){f()}if(settings.social_tools){facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href));$pp_pic_holder.find(".pp_social").html(facebook_like_link)}if($ppt.is(":hidden")){$ppt.css("opacity",0).show()}$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+d(pp_images).size());if(typeof pp_descriptions[set_position]!="undefined"&&pp_descriptions[set_position]!=""){$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]))}else{$pp_pic_holder.find(".pp_description").hide()}movie_width=parseFloat(a("width",pp_images[set_position]))?a("width",pp_images[set_position]):settings.default_width.toString();movie_height=parseFloat(a("height",pp_images[set_position]))?a("height",pp_images[set_position]):settings.default_height.toString();A=false;if(movie_height.indexOf("%")!=-1){movie_height=parseFloat(d(window).height()*parseFloat(movie_height)/100-150);A=true}if(movie_width.indexOf("%")!=-1){movie_width=parseFloat(d(window).width()*parseFloat(movie_width)/100-150);A=true}$pp_pic_holder.fadeIn(function(){settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined"?$ppt.html(unescape(pp_titles[set_position])):$ppt.html(" ");imgPreloader="";skipInjection=false;switch(j(pp_images[set_position])){case"image":imgPreloader=new Image;nextImage=new Image;if(isSet&&set_position<d(pp_images).size()-1){nextImage.src=pp_images[set_position+1]}prevImage=new Image;if(isSet&&pp_images[set_position-1]){prevImage.src=pp_images[set_position-1]}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){U=t(imgPreloader.width,imgPreloader.height);M()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");d.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case"youtube":U=t(movie_width,movie_height);movie_id=a("v",pp_images[set_position]);if(movie_id==""){movie_id=pp_images[set_position].split("youtu.be/");movie_id=movie_id[1];if(movie_id.indexOf("?")>0){movie_id=movie_id.substr(0,movie_id.indexOf("?"))}if(movie_id.indexOf("&")>0){movie_id=movie_id.substr(0,movie_id.indexOf("&"))}}movie="http://www.youtube.com/embed/"+movie_id;a("rel",pp_images[set_position])?movie+="?rel="+a("rel",pp_images[set_position]):movie+="?rel=1";if(settings.autoplay){movie+="&autoplay=1"}toInject=settings.iframe_markup.replace(/{width}/g,U.width).replace(/{height}/g,U.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":U=t(movie_width,movie_height);movie_id=pp_images[set_position];var h=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/;var k=movie_id.match(h);movie="http://player.vimeo.com/video/"+k[3]+"?title=0&byline=0&portrait=0";if(settings.autoplay){movie+="&autoplay=1;"}vimeo_width=U.width+"/embed/?moog_width="+U.width;toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,U.height).replace(/{path}/g,movie);break;case"quicktime":U=t(movie_width,movie_height);U.height+=15;U.contentHeight+=15;U.containerHeight+=15;toInject=settings.quicktime_markup.replace(/{width}/g,U.width).replace(/{height}/g,U.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":U=t(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,U.width).replace(/{height}/g,U.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":U=t(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,U.width).replace(/{height}/g,U.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=false;U=t(movie_width,movie_height);doresize=true;skipInjection=true;d.get(pp_images[set_position],function(l){toInject=settings.inline_markup.replace(/{content}/g,l);$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;M()});break;case"custom":U=t(movie_width,movie_height);toInject=settings.custom_markup;break;case"inline":myClone=d(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(d("body")).show();doresize=false;U=t(d(myClone).width(),d(myClone).height());doresize=true;d(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,d(pp_images[set_position]).html());break}if(!imgPreloader&&!skipInjection){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;M()}});return false};d.prettyPhoto.changePage=function(g){currentGalleryPage=0;if(g=="previous"){set_position--;if(set_position<0){set_position=d(pp_images).size()-1}}else{if(g=="next"){set_position++;if(set_position>d(pp_images).size()-1){set_position=0}}else{set_position=g}}rel_index=set_position;if(!doresize){doresize=true}if(settings.allow_expand){d(".pp_contract").removeClass("pp_contract").addClass("pp_expand")}q(function(){d.prettyPhoto.open()})};d.prettyPhoto.changeGalleryPage=function(g){if(g=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0}}else{if(g=="previous"){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage}}else{currentGalleryPage=g}}slide_speed=g=="next"||g=="previous"?settings.animation_speed:0;slide_to=currentGalleryPage*itemsPerPage*itemWidth;$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)};d.prettyPhoto.startSlideshow=function(){if(typeof I=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){d.prettyPhoto.stopSlideshow();return false});I=setInterval(d.prettyPhoto.startSlideshow,settings.slideshow)}else{d.prettyPhoto.changePage("next")}};d.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){d.prettyPhoto.startSlideshow();return false});clearInterval(I);I=undefined};d.prettyPhoto.close=function(){$("body").off();if($pp_overlay.is(":animated")){return}d.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");d("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){d(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(settings.hideflash){d("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible")}d(this).remove();d(window).unbind("scroll.prettyphoto");c();settings.callback();doresize=true;O=false;delete settings})};if(!pp_alreadyInitialized&&b()){pp_alreadyInitialized=true;hashIndex=b();hashRel=hashIndex;hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1);hashRel=hashRel.substring(0,hashRel.indexOf("/"));setTimeout(function(){d("a["+D.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)}return this.unbind("click.prettyphoto").bind("click.prettyphoto",d.prettyPhoto.initialize)}})(jQuery);var pp_alreadyInitialized=false;